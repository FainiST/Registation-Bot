###  Бот для записи

Небольшой Telegram‑бот на aiogram 3 для записи пользователей в базу и синхронизации данных с Google Sheets.

### Возможности
- **Регистрация**: бот собирает ФИО и номер телефона; ник Telegram подтягивается автоматически
- **Хранение**: данные сохраняются в SQLite (`database/registrs.db`)
- **Синхронизация**: фоновая задача добавляет новые записи в Google Sheets, не перезаписывая уже существующие
- **Валидация телефона**: проверка, что введённые символы — только цифры

### Требования
- Python 3.11+

### Установка
1) Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2) Подготовить окружение:
   - Создать файл `.env` и указать токен бота:
     ```env
     BOT_T=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
     ```
   - Положить ключ сервисного аккаунта Google в `sheets/cred.json`.

   Важно: хранить ключ в Git‑репозитории небезопасно. Рекомендуется исключить его из контроля версий и хранить секреты вне репозитория.

### Запуск
```bash
python main.py
```

При запуске инициализируется база и стартует фоновая синхронизация c Google Sheets (раз в ~5 минут). Новые записи из БД дозаписываются в таблицу, а не затирают её.

### Как начать регистрацию
- Откройте бота по дип‑ссылке вида: `https://t.me/<ваш_бот>?start=reg`
- Нажмите кнопку «Записаться» и следуйте инструкциям

### Конфигурация синхронизации
- Идентификатор таблицы и листа задаются в `sheets/sync.py` (`SHEET_ID`, `SHEET_NAME`)
- Заголовки столбцов: `name`, `phone`, `usrname`

### Полезно знать
- Виртуальное окружение `.venv/` исключено в `.gitignore`
- Для логирования используйте уровни логера вместо `print`


